<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI ÎØºÏõê Î©îÏã†Ï†Ä</title>

  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg,#1f2a44,#26334d);
      font-family: "Pretendard","Noto Sans KR",sans-serif;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
    }
    .wrap {
      width: 95%;
      max-width: 560px;
      height: 90vh;
      background: rgba(255,255,255,0.1);
      border-radius: 18px;
      padding: 16px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.35);
    }
    .chat {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding-right: 6px;
    }
    .msg {
      background: #dbe8ff;
      color: #002a69;
      padding: 12px 14px;
      border-radius: 12px;
      max-width: 85%;
      white-space: pre-line;
      line-height: 1.42;
    }
    .btn {
      background: #0056b3;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      align-self: center;
    }
    img.map{
      width:100%;
      border-radius:12px;
      opacity:0;
      transform:translateY(10px);
      transition:opacity .45s, transform .45s;
    }
    img.map.show{
      opacity:1;
      transform:translateY(0);
    }
  </style>
</head>

<body>
<div class="wrap">
  <div id="chat" class="chat"></div>
</div>

<script>
const chat=document.getElementById("chat");
const p=new URLSearchParams(location.search);

/* Í≥µÌÜµ Ï∂úÎ†• Ìï®Ïàò */
function add(text){
  const d=document.createElement("div");
  d.className="msg";
  d.textContent=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

function addBtn(label,fn){
  const b=document.createElement("button");
  b.className="btn";
  b.textContent=label;
  b.onclick=fn;
  chat.appendChild(b);
  chat.scrollTop=chat.scrollHeight;
}

function addImg(src){
  const i=document.createElement("img");
  i.src=src;
  i.className="map";
  chat.appendChild(i);
  chat.scrollTop=chat.scrollHeight;
  setTimeout(()=>i.classList.add("show"),10);
}

/* ÌååÎùºÎØ∏ÌÑ∞ Ï†ïÎ¶¨ */
let detail = p.get("detail") || "Í∏∞ÌÉÄ Î¨∏Ïùò";
let mode   = p.get("mode")   || "";

const status = p.get("status") || "";  // ok / busy
const record = p.get("record") || "no";

/* detail ÏïàÏ†ïÌôî */
if(!detail || detail === "undefined"){
  detail = "Í∏∞ÌÉÄ Î¨∏Ïùò";
}

/* ÎûúÎç§ Î¨∏Íµ¨ ÏÑ∏Ìä∏ */
const baseTexts={
  "ÌòºÌï©Ïú†":[
    "Ï£ºÏú† ÌõÑ Ï∞®Îüâ ÏãúÎèô Î∂àÎüâÏúºÎ°ú ÌòºÌï©Ïú†Í∞Ä ÏùòÏã¨Îê©ÎãàÎã§.",
    "Ï†ïÎπÑÏÜåÏóêÏÑú Ïó∞Î£å ÌíàÏßà Ïù¥ÏÉÅÏù¥ Î∞úÍ≤¨ÎêòÏñ¥ Ïã†Í≥†Ìï©ÎãàÎã§."
  ],
  "Í∞ÄÏßúÏÑùÏú†":[
    "Ï£ºÏú† ÌõÑ Ï∂úÎ†• Ï†ÄÌïòÎ°ú Í∞ÄÏßúÏÑùÏú†Í∞Ä ÏùòÏã¨Îê©ÎãàÎã§.",
    "Ï£ºÏú†ÏÜå ÌíàÏßà Î¨∏Ï†úÍ∞Ä Ï†úÍ∏∞ÎêòÏñ¥ Ïã†Í≥†Ìï©ÎãàÎã§."
  ],
  "Ï†ïÎüâÍ≤ÄÏÇ¨":[
    "Ï£ºÏú†ÎüâÏù¥ Î∂ÄÏ°±Ìïú Í≤ÉÏúºÎ°ú ÏùòÏã¨ÎêòÏñ¥ Ï†ëÏàòÌï©ÎãàÎã§."
  ],
  "LPG":[
    "LPG Ï∂©Ï†Ñ ÌõÑ Ïù¥ÏÉÅ ÏßÑÎèôÏù¥ Î∞úÏÉùÌïòÏó¨ Ï†ëÏàòÌï©ÎãàÎã§."
  ],
  "ÏùºÎ∞ò ÎåÄÎ¶¨Ï†ê Îì±Î°ù¬∑Î≥ÄÍ≤Ω":[
    "ÎåÄÎ¶¨Ï†ê Îì±Î°ù/Î≥ÄÍ≤Ω ÏÇ¨Ìï≠ Î¨∏ÏùòÎìúÎ¶ΩÎãàÎã§."
  ],
  "Í∏∞ÌÉÄ Î¨∏Ïùò":[
    "Í∏∞ÌÉÄ ÏÉÅÎã¥ ÏöîÏ≤≠ÎìúÎ¶ΩÎãàÎã§.",
    "ÏóÖÎ¨¥ Í¥ÄÎ†® Î¨∏ÏùòÍ∞Ä ÏûàÏäµÎãàÎã§."
  ]
};

const evidence={
  "ÌòºÌï©Ïú†":"Ïó∞Î£å ÏÉòÌîå Ï†úÏ∂úÎê®",
  "Í∞ÄÏßúÏÑùÏú†":"Ï£ºÌñâ ÏòÅÏÉÅ ÌôïÎ≥¥Îê®",
  "Ï†ïÎüâÍ≤ÄÏÇ¨":"Í≥ÑÎüâÍ∏∞ ÏÇ¨ÏßÑ Ï≤®Î∂ÄÎê®",
  "LPG":"ÏßÑÎèô Î∞úÏÉù ÏòÅÏÉÅ ÌôïÎ≥¥Îê®",
  "ÏùºÎ∞ò ÎåÄÎ¶¨Ï†ê Îì±Î°ù¬∑Î≥ÄÍ≤Ω":"Í¥ÄÎ†® ÏÑúÎ•ò ÌôïÎ≥¥Îê®",
  "Í∏∞ÌÉÄ Î¨∏Ïùò":"Í¥ÄÎ†® ÎÇ¥Ïö© ÌôïÏù∏Îê®"
};

const safeDetail = baseTexts[detail] ? detail : "Í∏∞ÌÉÄ Î¨∏Ïùò";

const txt = baseTexts[safeDetail][ Math.floor(Math.random()*baseTexts[safeDetail].length ) ];
const ev  = evidence[safeDetail];

/* üî• ÏÉÅÌÉú/ÎÖπÏùå Ï∂úÎ†• Í∑úÏπô ÏµúÏ¢ÖÎ≥∏ */
let statusText = "";
let recordText = "";

/* Ï†ïÏÉÅ Ï†ëÏàòÏùº Í≤ΩÏö∞ ‚Üí ÏÉÅÌÉú/ÎÖπÏùå Î™®Îëê ÌëúÏãúÌïòÏßÄ ÏïäÏùå */
if(status === "ok"){
  statusText = "";
  recordText = "";
}

/* Î∂ÄÏû¨Ï§ë + ÎÖπÏùå Ïïà Ìï® */
else if(status === "busy" && record === "no"){
  statusText = "Îã¥ÎãπÏûê ÌÜµÌôîÏ§ë/Î∂ÄÏû¨Ï§ë";
  recordText = "ÎÖπÏùå ÌååÏùº ÏóÜÏùå";
}

/* Î∂ÄÏû¨Ï§ë + ÎÖπÏùå Ìï® */
else if(status === "busy" && record === "yes"){
  statusText = "Îã¥ÎãπÏûê ÌÜµÌôîÏ§ë/Î∂ÄÏû¨Ï§ë";
  recordText = "ÎÖπÏùå ÌååÏùº ÏûàÏùå";
}

/* ---------------- Ï¥àÍ∏∞ ÏöîÏïΩ Î©îÏãúÏßÄ Íµ¨ÏÑ± ---------------- */

const lines = [];

// ÏßÄÏó≠
lines.push(`ÏßÄÏó≠: ${p.get("region") || ""}`);

// Ïú†Ìòï (Í∏∞ÌÉÄÎ¨∏ÏùòÎäî Í¥ÑÌò∏ Ï†úÍ±∞)
if(safeDetail === "Í∏∞ÌÉÄ Î¨∏Ïùò" || !mode){
  lines.push(`Ïú†Ìòï: ${safeDetail}`);
} else {
  lines.push(`Ïú†Ìòï: ${safeDetail} (${mode})`);
}

// Ïã†Í≥†Ïûê / Ï£ºÏÜå / Î≥∏Î¨∏
lines.push(`Ïã†Í≥†Ïûê: ${p.get("name")} / ${p.get("phone")}`);
lines.push(`Ï£ºÏÜå: ${p.get("addr")}`);
lines.push(`ÎÇ¥Ïö©: ${txt}`);

// Í∏∞ÌÉÄÎ¨∏ÏùòÎäî Ï¶ùÍ±∞Î¨º Ï†úÍ±∞
if(safeDetail !== "Í∏∞ÌÉÄ Î¨∏Ïùò"){
  lines.push(`Ï¶ùÍ±∞Î¨º: ${ev}`);
}

// üî• Ï†ïÏÉÅÏ†ëÏàòÏùº ÎïåÎäî ÏÉÅÌÉú & ÎÖπÏùå Î™®Îëê Ï∂úÎ†• X
if(statusText){
  lines.push(`ÏÉÅÌÉú: ${statusText}`);
}

if(recordText){
  lines.push(`ÎÖπÏùå: ${recordText}`);
}

add(lines.join("\n"));

/* ---------------- Ï†ëÏàò ÌôïÏù∏ Î≤ÑÌäº ‚Üí ÏßÄÎèÑ ÌùêÎ¶Ñ ---------------- */

addBtn("Ï†ëÏàò ÌôïÏù∏", async()=>{

  add("Ïã†Í≥†ÏûêÏóêÍ≤å Ï†ëÏàòÌôïÏù∏Ïù¥ Ï†ÑÎã¨ÎêòÏóàÏäµÎãàÎã§.");

  await new Promise(r=>setTimeout(r,900));

  add("2Í±¥ Ïù¥ÏÉÅ Ï†ëÏàòÎêú ÏùòÏã¨ ÏóÖÏÜåÍ∞Ä ÏûàÏäµÎãàÎã§.\nÌôïÏù∏ÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
  addBtn("ÏßÄÎèÑ ÌôïÏù∏",()=>{

    addImg("./images/map_shop_blind.png");

    setTimeout(()=>{
      add("Ìï¥Îãπ Íµ¨Ïó≠ÏùÄ 1Î∂ÑÍ∏∞ 3Ìöå Ïù¥ÏÉÅ Ïã†Í≥†Í∞Ä Ï†ëÏàòÎêú ÏùòÏã¨ ÏßÄÏó≠ÏûÖÎãàÎã§.\nÌôïÏù∏ÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
      addBtn("ÏßÄÎèÑ ÌôïÏù∏",()=>{
        addImg("./images/map_city_blind.png");
      });
    },900);
  });
});
</script>

</body>
</html>








 

