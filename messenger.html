<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI ë¯¼ì› ë©”ì‹ ì €</title>

  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg,#1f2a44,#26334d);
      font-family: "Pretendard","Noto Sans KR",sans-serif;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
    }
    .wrap {
      width: 95%;
      max-width: 560px;
      height: 90vh;
      background: rgba(255,255,255,0.1);
      border-radius: 18px;
      padding: 16px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.35);
    }
    .chat {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding-right: 6px;
    }
    .msg {
      background: #dbe8ff;
      color: #002a69;
      padding: 12px 14px;
      border-radius: 12px;
      max-width: 85%;
      white-space: pre-line;
      line-height: 1.42;
    }
    .btn {
      background: #0056b3;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      align-self: center;
    }
    img.map{
      width:100%;
      border-radius:12px;
      opacity:0;
      transform:translateY(10px);
      transition:opacity .45s, transform .45s;
    }
    img.map.show{
      opacity:1;
      transform:translateY(0);
    }
  </style>
</head>

<body>
<div class="wrap">
  <div id="chat" class="chat"></div>
</div>

<script>
const chat=document.getElementById("chat");
const p=new URLSearchParams(location.search);

/* ê³µí†µ ì¶œë ¥ í•¨ìˆ˜ */
function add(text){
  const d=document.createElement("div");
  d.className="msg";
  d.textContent=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

function addBtn(label,fn){
  const b=document.createElement("button");
  b.className="btn";
  b.textContent=label;
  b.onclick=fn;
  chat.appendChild(b);
  chat.scrollTop=chat.scrollHeight;
}

function addImg(src){
  const i=document.createElement("img");
  i.src=src;
  i.className="map";
  chat.appendChild(i);
  chat.scrollTop=chat.scrollHeight;
  setTimeout(()=>i.classList.add("show"),10);
}

/* íŒŒë¼ë¯¸í„° ì •ë¦¬ */
let detail = p.get("detail") || "ê¸°íƒ€ ë¬¸ì˜";
let mode   = p.get("mode")   || "";

const status = p.get("status") || "";  // ok / busy
const record = p.get("record") || "no";

/* detail ì•ˆì •í™” */
if(!detail || detail === "undefined"){
  detail = "ê¸°íƒ€ ë¬¸ì˜";
}

/* ëœë¤ ë¬¸êµ¬ ì„¸íŠ¸ */
const baseTexts={
  "í˜¼í•©ìœ ":[
    "ì£¼ìœ  í›„ ì°¨ëŸ‰ ì‹œë™ ë¶ˆëŸ‰ìœ¼ë¡œ í˜¼í•©ìœ ê°€ ì˜ì‹¬ë©ë‹ˆë‹¤.",
    "ì •ë¹„ì†Œì—ì„œ ì—°ë£Œ í’ˆì§ˆ ì´ìƒì´ ë°œê²¬ë˜ì–´ ì‹ ê³ í•©ë‹ˆë‹¤."
  ],
  "ê°€ì§œì„ìœ ":[
    "ì£¼ìœ  í›„ ì¶œë ¥ ì €í•˜ë¡œ ê°€ì§œì„ìœ ê°€ ì˜ì‹¬ë©ë‹ˆë‹¤.",
    "ì£¼ìœ ì†Œ í’ˆì§ˆ ë¬¸ì œê°€ ì œê¸°ë˜ì–´ ì‹ ê³ í•©ë‹ˆë‹¤."
  ],
  "ì •ëŸ‰ê²€ì‚¬":[
    "ì£¼ìœ ëŸ‰ì´ ë¶€ì¡±í•œ ê²ƒìœ¼ë¡œ ì˜ì‹¬ë˜ì–´ ì ‘ìˆ˜í•©ë‹ˆë‹¤."
  ],
  "LPG":[
    "LPG ì¶©ì „ í›„ ì´ìƒ ì§„ë™ì´ ë°œìƒí•˜ì—¬ ì ‘ìˆ˜í•©ë‹ˆë‹¤."
  ],
  "ì¼ë°˜ ëŒ€ë¦¬ì  ë“±ë¡Â·ë³€ê²½":[
    "ëŒ€ë¦¬ì  ë“±ë¡/ë³€ê²½ ì‚¬í•­ ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤."
  ],
  "ê¸°íƒ€ ë¬¸ì˜":[
    "ê¸°íƒ€ ìƒë‹´ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.",
    "ì—…ë¬´ ê´€ë ¨ ë¬¸ì˜ê°€ ìˆìŠµë‹ˆë‹¤."
  ]
};

const evidence={
  "í˜¼í•©ìœ ":"ì—°ë£Œ ìƒ˜í”Œ ì œì¶œë¨",
  "ê°€ì§œì„ìœ ":"ì£¼í–‰ ì˜ìƒ í™•ë³´ë¨",
  "ì •ëŸ‰ê²€ì‚¬":"ê³„ëŸ‰ê¸° ì‚¬ì§„ ì²¨ë¶€ë¨",
  "LPG":"ì§„ë™ ë°œìƒ ì˜ìƒ í™•ë³´ë¨",
  "ì¼ë°˜ ëŒ€ë¦¬ì  ë“±ë¡Â·ë³€ê²½":"ê´€ë ¨ ì„œë¥˜ í™•ë³´ë¨",
  "ê¸°íƒ€ ë¬¸ì˜":"ê´€ë ¨ ë‚´ìš© í™•ì¸ë¨"
};

const safeDetail = baseTexts[detail] ? detail : "ê¸°íƒ€ ë¬¸ì˜";

const txt = baseTexts[safeDetail][ Math.floor(Math.random()*baseTexts[safeDetail].length ) ];
const ev  = evidence[safeDetail];

/* ğŸ”¥ ìƒíƒœ/ë…¹ìŒ ì¶œë ¥ ê·œì¹™ ìµœì¢…ë³¸ */
let statusText = "";
let recordText = "";

/* ì •ìƒ ì ‘ìˆ˜ì¼ ê²½ìš° â†’ ìƒíƒœ/ë…¹ìŒ ëª¨ë‘ í‘œì‹œí•˜ì§€ ì•ŠìŒ */
if(status === "ok"){
  statusText = "";
  recordText = "";
}

/* ë¶€ì¬ì¤‘ + ë…¹ìŒ ì•ˆ í•¨ */
else if(status === "busy" && record === "no"){
  statusText = "ë‹´ë‹¹ì í†µí™”ì¤‘/ë¶€ì¬ì¤‘";
  recordText = "ë…¹ìŒ íŒŒì¼ ì—†ìŒ";
}

/* ë¶€ì¬ì¤‘ + ë…¹ìŒ í•¨ */
else if(status === "busy" && record === "yes"){
  statusText = "ë‹´ë‹¹ì í†µí™”ì¤‘/ë¶€ì¬ì¤‘";
  recordText = "ë…¹ìŒ íŒŒì¼ ìˆìŒ";
}

/* ---------------- ì´ˆê¸° ìš”ì•½ ë©”ì‹œì§€ êµ¬ì„± ---------------- */

const lines = [];

lines.push(`ì§€ì—­: ${p.get("region") || ""}`);

if(safeDetail === "ê¸°íƒ€ ë¬¸ì˜" || !mode){
  lines.push(`ìœ í˜•: ${safeDetail}`);
} else {
  lines.push(`ìœ í˜•: ${safeDetail} (${mode})`);
}

lines.push(`ì‹ ê³ ì: ${p.get("name")} / ${p.get("phone")}`);
lines.push(`ì£¼ì†Œ: ${p.get("addr")}`);
lines.push(`ë‚´ìš©: ${txt}`);

if(safeDetail !== "ê¸°íƒ€ ë¬¸ì˜"){
  lines.push(`ì¦ê±°ë¬¼: ${ev}`);
}

if(statusText){
  lines.push(`ìƒíƒœ: ${statusText}`);
}

if(recordText){
  lines.push(`ë…¹ìŒ: ${recordText}`);
}

add(lines.join("\n"));

/* ---------------- ì ‘ìˆ˜ í™•ì¸ ë²„íŠ¼ â†’ ì§€ë„ íë¦„ ---------------- */

addBtn("ì ‘ìˆ˜ í™•ì¸", async()=>{

  add("ì‹ ê³ ìì—ê²Œ ì ‘ìˆ˜í™•ì¸ì´ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤.");

  await new Promise(r=>setTimeout(r,900));

  add("2ê±´ ì´ìƒ ì ‘ìˆ˜ëœ ì˜ì‹¬ ì—…ì†Œê°€ ìˆìŠµë‹ˆë‹¤.\ní™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
  addBtn("ì§€ë„ í™•ì¸",()=>{

    /* ğŸ”¥ ìˆ˜ì •ëœ ì ˆëŒ€ê²½ë¡œ */
    addImg("/images/map_shop_blind.png");

    setTimeout(()=>{
      add("í•´ë‹¹ êµ¬ì—­ì€ 1ë¶„ê¸° 3íšŒ ì´ìƒ ì‹ ê³ ê°€ ì ‘ìˆ˜ëœ ì˜ì‹¬ ì§€ì—­ì…ë‹ˆë‹¤.\ní™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
      addBtn("ì§€ë„ í™•ì¸",()=>{
        
        /* ğŸ”¥ ìˆ˜ì •ëœ ì ˆëŒ€ê²½ë¡œ */
        addImg("/images/map_city_blind.png");

      });
    },900);
  });
});
</script>

</body>
</html>








 


